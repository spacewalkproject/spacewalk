Directories:

NOTIFICATION_HOME=`/usr/bin/npConfigValue notification home`

$NOTIFICATION_HOME/config

$NOTIFICATION_HOME/config/archive
contains directories named by date, e.g. 2003-05-05.08:41:54, which contain old copies of the generated configuration files

$NOTIFICATION_HOME/config/generated
contains configuration files generated by $NOTIFICATION_HOME/scripts/generate-config.

contact_groups.ini
contact_methods.ini
contacts.ini
customers.ini
message_formats.ini
redirect_criteria.ini
redirects.ini
schedules.ini

$NOTIFICATION_HOME/config/stage
directory used during configuration generation for temporary files

$NOTIFICATION_HOME/config/static

notif.ini -- configuration file detailing serverid (in the notification farm) and the box's address.  Currently hooked into the sysvstep framework and generated by notification system startup.

$NOTIFICATION_HOME/etc

$NOTIFICATION_HOME/queue
$NOTIFICATION_HOME/queue/ack_queue
$NOTIFICATION_HOME/queue/alert_queue
$NOTIFICATION_HOME/queue/request_queue

$NOTIFICATION_HOME/script

ack_enqueuer.pl -- called by sendmail to enqueue acknowledgement emails for processing by notifserver.pl.  Emails are screened for acceptance by send id against $NOTIFICATION_HOME/tmp/send_history.gdbm.   Accepted emails are enqueued in plain text in $NOTIFICATION_HOME/queue/ack_queue.  Log file is /var/tmp/ack_handler.log.

ack-processor -- program that takes enqueued email acknowledgements and processes them using the notif-escalator.  Handles and replies to the original sender of the email.

escalator-remote-check -- NOT IN USE.  a remote program check to monitor the escalator using Command Center.  

generate-config -- script called from cron to generate ini files used to run the notification system.  The ini files are stored in $NOTIFICATION_HOME/config/stage as they are created and moved to $NOTIFICATION_HOME/config/generated when they are to be used by the system.  The ini file contain customer, schedule, group, contact, and message format data.  Log file is $NOTIFICATION_HOME/logs/generate_config.log.

init_script -- DEPRICATED.  Old sys-v style script for starting notifserver.pl.

monitor-queue -- script called by cron to monitor the alert, acknowledgement, and request queues.  This works independent from the notification system and uses SMTP to deliver warning messages.

notif -- utility script used to display an dmanipulate sends and alerts.  Run $NOTIFICATION_HOME/scripts/notif --help for syntax.

notif-escalator -- notification program in charge of tracking alerts and sends, and doing escalations.

notif-launcher -- notification program which reads new alerts from the inbound queue, processes redirects, and registers the alerts and initial sends with the notif-escalator.

notifier -- notification program which polls the notif-escalator for new sends and delivers these sends via SMTP and SNMP (via the database and scout).

queue-remote-check -- a remote program check to monitor the acknowledgement, alert, and request queue depths using Command Center.  

show-alert -- a utility script which displays an enqueued alert (Storable format) as plain text.  Run $NOTIFICATION_HOME/scripts/show-alert -- help for syntax.

show-queue -- a utility script which display the number of alerts, acknowledgements, and requests currently enqueued.

testit.pl -- NOT IN USE.

$NOTIFICATION_HOME/tmp

escalator.state -- contains a copy of the Escalator object in Storable format for state preservation when the notification system is gracefully stopped or forcably killed.  This object contains all the information on current in progress sends, alerts, and escalations.

gritch.db -- gdbm file for gritch data.

sendhistory.gdbm -- gdbm file containing information about sends used for unique send id generation and acknowledgement preprocessing to prevent notifserver.log load in the event of a DOS attack.  It is pruned periodically by notifserver.pl's escalator.

$NOTIFICATION_HOME/var

NotifEscalator-error.log -- stderr captured by gogo.pl while babysitting notif-escalator.  

NotifLauncher-error.log -- stderr captured by gogo.pl while babysitting notif-launcher.  This file should be empty, but often contains Oracle errors when connectivity to Oracle has been severed.

enqueue.log -- log file from cgi-script /var/www/cgi-mod-perl/enqueue.cgi.  This log contains the url including query parameters used to call enqueue.cgi and the ticket id, e.g. 01_1051746931_14006_027, assigned that can be matched with entries in notifserver.log.

generate_config.log -- log file from /usr/bin/generate-config.  Contains high level run summaries and any errors if occurred.

notifserver.log -- Master system log.  Shows all alerts, sends, acknowledgement attempts.  Contains ticket id, alert id, send id, contact group id and contact method id as reference points.  

$NOTIFICATION_HOME/var/ticketlog -- NOT IN USE

/etc
sendmail.cf

/etc/mail
trusted-users

/etc/rc.d/init.d
Apache  -- "SysVStep" style init script for starting the Apache daemon.  Stop this daemon to prevent notifications from being enqueued.  New notifications will rejected back to the satellites.  Previously enqueued notifications will continue to be sent as long as Notifier is running.

Notifier  -- "SysVStep" style init script for starting the notifserver.pl daemon.  Stop this daemon to prevent notifications from being sent.  Notifications will continue to enqueue as long as Apache is running.

/var/www/cgi-bin

alertmgr.cgi -- Internal-use tool that allows one to acknowledge and clear alerts, start and stop the system, view system logs.  -- NOT FULLY FUNCTIONAL

redirmgr.cgi -- Internal-use tool that allows one to configure a redirect (advaned notification).

/var/www/cgi-mod-perl
enqueue.cgi -- This script enqueues notification requests from satellites sent via http by the event receiver box.  It does some basic screening and will reject notifications missing complete information.  Enqueued alerts (notifications) are placed in Storable format and put in $NOTIFICATION_HOME/queue/alert_queue.  Log file is /var/log/nocpulse/enqueue.log.

notifserver-test.cgi

/var/www/htdocs
This directory is the document root.  It contains templates and index page for the internal-use notification tools.

/var/www/templates
This directory contains html templates used be the internal-use notification tools.

/var/tmp

ack_handler.log -- Log file for $NOTIFICATION_HOME/scripts/ack_enqueuer.pl.  Logs entire inbound email messages to rogerthat and whether or not the ack_enqueuer accepted the email for enqueuing into the notification system.
